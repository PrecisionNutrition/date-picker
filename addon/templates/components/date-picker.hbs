{{#if isNativePickerDisplayed}}
  <input
    type="date"
    value={{castedValue}}
    name={{@name}}
    disabled={{@isDisabled}}
    placeholder={{placeholder}}
    onchange={{action "setValueAndValidate" value="target.value"}}
    class={{inputClass}}
    min={{moment-format minimum "YYYY-MM-DD" timeZone="UTC"}}
    max={{moment-format maximum "YYYY-MM-DD" timeZone="UTC"}}
    required={{@required}}
    data-test-selector="input-field"
  >
{{else}}
  <PowerDatepicker
    @selected={{castedValue}}
    @onSelect={{action "setValueAndValidate" value="date"}}
    @disabled={{@isDisabled}}
    @center={{center}}
    @verticalPosition={{@verticalPosition}}
  as |Picker|
  >
    <Picker.Trigger @tabindex="-1">
      <input
        type="text"
        name={{@name}}
        placeholder={{@placeholder}}
        value={{moment-format Picker.selected "MMMM D, YYYY" allowEmpty=true}}
        class={{inputClass}}
        disabled={{@isDisabled}}
        readonly
        data-test-selector="date-picker-trigger"
      >
    </Picker.Trigger>

    <Picker.Content
      class="DatePicker"
      data-test-selector="date-picker-content"
    >
      <nav 
        class="ember-power-calendar-nav"
        data-test-selector="calendar-nav"
        data-test-center-value={{moment-format Picker.center "YYYY-MM-DD"}}
      >
        <button
          class="ember-power-calendar-nav-control ember-power-calendar-nav-control--previous"
          type="button"
          data-test-selector="previous-month-button"
          disabled={{and @min (is-same-or-before Picker.center @min precision="month")}}
          onclick={{action Picker.actions.moveCenter -1 "month"}}
        >
          ◀
        </button>

        <div class="ember-power-calendar-dropdowns-holder">
          {{#let (moment-format Picker.center "MMMM") as |currentMonth|}}
            <select
              class="ember-power-calendar-nav-dropdown"
              onchange={{action "changeCenter" "month" Picker}}
              data-test-selector="month-selector"
            >
              {{#each selectableMonthOptions as |opt|}}
                <option selected={{eq opt currentMonth}} value={{opt}}>
                  {{opt}}
                </option>
              {{/each}}
            </select>
          {{/let}}

          {{#let (moment-format Picker.center "YYYY") as |currentYear|}}
            <select
              class="ember-power-calendar-nav-dropdown"
              onchange={{action "changeCenter" "year" Picker}}
              data-test-selector="year-selector"
            >
              {{#each selectableYearOptions as |opt|}}
                <option selected={{eq opt currentYear}} value={{opt}}>
                  {{opt}}
                </option>
              {{/each}}
            </select>
          {{/let}}
        </div>

        <button
          class="ember-power-calendar-nav-control ember-power-calendar-nav-control--next"
          type="button"
          disabled={{and @max (is-same-or-after Picker.center @max precision="month")}}
          onclick={{action Picker.actions.moveCenter 1 "month"}}
          data-test-selector="next-month-button"
        >
          ▶
        </button>
      </nav>

      <Picker.Days
        @minDate={{minimum}}
        @maxDate={{maximum}}
        class="DatePicker-days"
      />
    </Picker.Content>
  </PowerDatepicker>
{{/if}}
